name: init
handler: specify_cli.commands.init:init
help: "Initialize a new Specify project from the latest template."
description: |
  This command will:
  1. Check that required tools are installed (git is optional)
  2. Let you choose your AI assistant
  3. Download the appropriate template from GitHub
  4. Extract the template to a new project directory or current directory
  5. Initialize a fresh git repository (if not --no-git and no existing repo)
  6. Optionally set up AI assistant commands

  Examples:
      specify init my-project
      specify init my-project --ai claude
      specify init my-project --ai copilot --no-git
      specify init --ignore-agent-tools my-project
      specify init . --ai claude         # Initialize in current directory
      specify init .                     # Initialize in current directory (interactive AI selection)
      specify init --here --ai claude    # Alternative syntax for current directory
      specify init --here --ai codex
      specify init --here --ai codebuddy
      specify init --here
      specify init --here --force  # Skip confirmation when current directory not empty
arguments:
  - name: project_name
    required: false
    help: "Name for your new project directory (optional if using --here, or use '.' for current directory)"
options:
  - name: ai_assistant
    flags: ["--ai"]
    type: string
    help: "AI assistant to use: claude, gemini, copilot, cursor-agent, qwen, opencode, codex, windsurf, kilocode, auggie, codebuddy, amp, shai, or q"
  - name: script_type
    flags: ["--script"]
    type: string
    help: "Script type to use: sh or ps"
  - name: ignore_agent_tools
    flags: ["--ignore-agent-tools"]
    type: boolean
    help: "Skip checks for AI agent tools like Claude Code"
  - name: no_git
    flags: ["--no-git"]
    type: boolean
    help: "Skip git repository initialization"
  - name: here
    flags: ["--here"]
    type: boolean
    help: "Initialize project in the current directory instead of creating a new one"
  - name: force
    flags: ["--force"]
    type: boolean
    help: "Force merge/overwrite when using --here (skip confirmation)"
  - name: skip_tls
    flags: ["--skip-tls"]
    type: boolean
    help: "Skip SSL/TLS verification (not recommended)"
  - name: debug
    flags: ["--debug"]
    type: boolean
    help: "Show verbose diagnostic output for network and extraction failures"
  - name: github_token
    flags: ["--github-token"]
    type: string
    help: "GitHub token to use for API requests (or set GH_TOKEN or GITHUB_TOKEN environment variable)"

messages:
  next_steps:
    header: "Start using slash commands with your AI agent:"
    items:
      - "2.1 [cyan]/speckit.constitution[/] - Establish project principles"
      - "2.2 [cyan]/speckit.specify[/] - Create baseline specification"
      - "2.3 [cyan]/speckit.plan[/] - Create implementation plan"
      - "2.4 [cyan]/speckit.tasks[/] - Generate actionable tasks"
      - "2.5 [cyan]/speckit.implement[/] - Execute implementation"

  enhancements:
    header: "Optional commands that you can use for your specs [bright_black](improve quality & confidence)[/bright_black]"
    items:
      - "○ [cyan]/speckit.clarify[/] [bright_black](optional)[/bright_black] - Ask structured questions to de-risk ambiguous areas before planning (run before [cyan]/speckit.plan[/] if used)"
      - "○ [cyan]/speckit.analyze[/] [bright_black](optional)[/bright_black] - Cross-artifact consistency & alignment report (after [cyan]/speckit.tasks[/], before [cyan]/speckit.implement[/])"
      - "○ [cyan]/speckit.checklist[/] [bright_black](optional)[/bright_black] - Generate quality checklists to validate requirements completeness, clarity, and consistency (after [cyan]/speckit.plan[/])"

  errors:
    conflict_here_project: "Cannot specify both project name and --here flag"
    missing_target: "Must specify either a project name, use '.' for current directory, or use --here flag"
    directory_exists: "Directory '[cyan]{project_name}[/cyan]' already exists\nPlease choose a different project name or remove the existing directory."
    invalid_ai: "Invalid AI assistant '{ai_assistant}'. Choose from: {choices}"
    invalid_script: "Invalid script type '{script_type}'. Choose from: {choices}"
    agent_not_found: "[cyan]{agent}[/cyan] not found\nInstall from: [cyan]{url}[/cyan]\n{name} is required to continue with this project type.\n\nTip: Use [cyan]--ignore-agent-tools[/cyan] to skip this check"

  warnings:
    dir_not_empty: "Current directory is not empty ({count} items)"
    merge_warning: "Template files will be merged with existing content and may overwrite existing files"
    git_not_found: "Git not found - will skip repository initialization"
    git_init_failed: "Git repository initialization failed\n\n{error}\n\n[dim]You can initialize git manually later with:[/dim]\n[cyan]cd {path}[/cyan]\n[cyan]git init[/cyan]\n[cyan]git add .[/cyan]\n[cyan]git commit -m \"Initial commit\"[/cyan]"

  prompts:
    continue_merge: "Do you want to continue?"
    choose_ai: "Choose your AI assistant:"
    choose_script: "Choose script type (or press Enter)"

  status:
    force_skip: "[cyan]--force supplied: skipping confirmation and proceeding with merge[/cyan]"
    cancelled: "Operation cancelled"
    setup_title: "Specify Project Setup"
    selected_ai: "Selected AI assistant:"
    selected_script: "Selected script type:"
    project_ready: "Project ready."
    agent_security_title: "Agent Folder Security"
    agent_security_body: "Some agents may store credentials, auth tokens, or other identifying and private artifacts in the agent folder within your project.\nConsider adding [cyan]{folder}[/cyan] (or parts of it) to [cyan].gitignore[/cyan] to prevent accidental credential leakage."

  steps:
    cd_project: "1. Go to the project folder: [cyan]cd {project_name}[/cyan]"
    already_here: "1. You're already in the project directory!"
    codex_home: "{step_num}. Set [cyan]CODEX_HOME[/cyan] environment variable before running Codex: [cyan]{cmd}[/cyan]"
