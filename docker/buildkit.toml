debug = true

[worker.oci]
  enabled = true
  gc = true
  gckeepstorage = 20000 # 20GB

  # SSD optimization - larger but fewer layers
  [worker.oci.layers]
    max_cache_size = "10GB"
    compression_level = 5

  # Optimize CPU usage during builds
  # Commented out to allow full CPU usage as per subagent parallelization recommendation
  # [worker.oci.cpu]
  #   cpuset = "0-3"

[registry."docker.io"]
  mirrors = ["mirror.gcr.io"]

[registry."ghcr.io"]
  headers = ["User-Agent=Docker-Client/20.10.21 (linux)"]

[worker.containerd]
  gc = true
  gckeepstorage = 20000

# Concurrency settings for multi-platform builds
[worker.containerd.platforms]
  supported = true
  prioritized = ["linux/amd64", "linux/arm64"]
