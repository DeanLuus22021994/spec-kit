[registry."docker.io"]
  mirrors = ["ghcr.io/spec-kit/cache"]

[registry."ghcr.io"]
  headers = ["User-Agent=Docker-Client/20.10.21 (linux)"]

# Cache configuration
[worker.oci]
  gc = true
  gckeepstorage = 20000

[worker.containerd]
  gc = true
  gckeepstorage = 20000

# Concurrency settings for multi-platform builds
[worker.containerd.platforms]
  supported = true
  prioritized = ["linux/amd64", "linux/arm64"]

# Optimize CPU usage during builds
# [worker.oci.cpu]
#   cpuset = "0-3"

# SSD optimization - larger but fewer layers
[worker.oci.layers]
  max_cache_size = "10GB"
  compression_level = 5
